"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[411],{9112:(ve,Y,t)=>{t.d(Y,{M:()=>u});var e=t(9067),g=t(8081),P=t(5581);const u=(...E)=>(0,e._U)((0,g.Dv)(P._8.appConfig,...E))},8961:(ve,Y,t)=>{t.d(Y,{Z:()=>P});var e=t(8081),g=t(9067);const P=u=>{const E=u===e.Mv.audio,f=E?e.Hx:e.k0,I=(0,g._U)(f.selectedItem),$=(0,g._U)(f.selection),M=(0,g._U)(f.list),q=(0,g.cw)(),K=E?q.audioPlaylist:q.videoPlaylist;return{active:I,hasNext:$.hasNext,hasPrevious:$.hasPrevious,actions:K,list:M}}},9121:(ve,Y,t)=>{t.d(Y,{VK:()=>Z,nN:()=>w,l0:()=>G.l});var e=t(8160),g=t(5836),P=t(9067),u=t(8081),E=t(108),f=t.n(E),I=Object.defineProperty,$=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,K=(T,v,h)=>v in T?I(T,v,{enumerable:!0,configurable:!0,writable:!0,value:h}):T[v]=h,b=(T,v)=>{for(var h in v||(v={}))M.call(v,h)&&K(T,h,v[h]);if($)for(var h of $(v))q.call(v,h)&&K(T,h,v[h]);return T},R=(T,v,h)=>(K(T,typeof v!="symbol"?v+"":v,h),h);const x=T=>JSON.stringify(T,(v,h)=>h===void 0?null:h);class ne{constructor(){R(this,"init",(v="")=>{this.initialized||(this.pusher=new(f())("",{cluster:"ap2",authEndpoint:""}),this.channel=this.pusher.subscribe(`private-${v}`),this.channel.bind("pusher:subscription_succeeded",this.resendLastEvents),console.log("Whiteboard initialized communication through Pusher"),this.initialized=!0)}),R(this,"storeEvent",(v,h)=>{this.lastMessage[v]=b({eventName:v},h)}),R(this,"getStoredEvent",v=>this.lastMessage[v]),R(this,"broadcastEvent",(v,h={})=>{var p;this.storeEvent(v,h),(p=this.channel)==null||p.trigger(`client-${v}`,x(b({eventName:v},h)))}),R(this,"subscribe",(v,h)=>{var p,_;return(p=this.channel)==null||p.bind(`client-${v}`,U=>this.storeEvent(v,U)),(_=this.channel)==null||_.bind(`client-${v}`,h),()=>{var U;(U=this.channel)==null||U.unbind(`client-${v}`,h)}}),R(this,"resendLastEvents",()=>{var v;for(const h in this.lastMessage)this.lastMessage[h]&&((v=this.channel)==null||v.trigger(`client-${h}`,this.lastMessage[h]))}),this.initialized=!1,this.lastMessage={}}}const H=new ne,B={STATE_CHANGE:"state-change",CURRENT_STATE:"current-state",REQUEST_STATE:"request-state"};var G=t(802);const re=()=>{const{amIWhiteboardOwner:T}=(0,G.l)();return{shouldRequestState:(0,P._U)((0,u._u)(850)),amIWhiteboardOwner:T}};function W(T){const[v,h]=(0,e.useState)(null),[p,_]=(0,e.useState)(!1),{amIWhiteboardOwner:U,shouldRequestState:J}=re(),se=(0,e.useRef)(new Map),z=(0,e.useRef)(new Map),ee=(0,e.useCallback)(()=>({shapes:se.current?Object.fromEntries(se.current):{},bindings:z.current?Object.fromEntries(z.current):{}}),[]),le=(0,e.useCallback)(()=>{U&&p&&H.broadcastEvent(B.CURRENT_STATE,ee())},[U,p,ee]),oe=(0,e.useCallback)(({shapes:te,bindings:de,merge:pe=!0})=>{if(!!(te&&de))if(pe){const fe=se.current,Re=z.current;if(!(fe&&Re))return;Object.entries(te).forEach(([Oe,ge])=>{ge?fe.set(ge.id,ge):fe.delete(Oe)}),Object.entries(de).forEach(([Oe,ge])=>{ge?Re.set(ge.id,ge):Re.delete(Oe)})}else se.current=new Map(Object.entries(te)),z.current=new Map(Object.entries(de))},[]),he=(0,e.useCallback)(te=>{v?.replacePageContent(te.shapes,te.bindings,{})},[v]),ce=(0,e.useCallback)(te=>{if(!te)return;const{shapes:de,bindings:pe,eventName:fe}=te;oe({shapes:de,bindings:pe,merge:fe===B.STATE_CHANGE}),he(ee())},[he,ee,oe]),ae=(0,e.useCallback)(()=>{!p||(U?(ce(H.getStoredEvent(B.CURRENT_STATE)),le()):J&&H.broadcastEvent(B.REQUEST_STATE))},[p,U,J,ce,le]),Te=(0,e.useCallback)(te=>{te.loadRoom(T),te.pause(),h(te)},[T]),Ce=(0,e.useCallback)((te,de,pe,fe)=>{oe({shapes:de,bindings:pe}),H.broadcastEvent(B.STATE_CHANGE,{shapes:de,bindings:pe}),he(ee())},[oe,he,ee]);return(0,e.useEffect)(()=>{if(!v)return;const te=[];let de=!0;function pe(){de&&(te.push(H.subscribe(B.STATE_CHANGE,ce)),te.push(H.subscribe(B.CURRENT_STATE,ce)),te.push(H.subscribe(B.REQUEST_STATE,le)),_(!0))}return H.init(T),pe(),ae(),()=>{de=!1,te.forEach(fe=>fe())}},[v,T,ae,le,ce]),(0,e.useEffect)(()=>()=>{p&&!J&&(console.log("Whiteboard unmount storing",ee()),H.storeEvent(B.CURRENT_STATE,ee()))},[p,J,ee]),{onMount:Te,onChangePage:Ce}}var j=Object.defineProperty,D=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,A=(T,v,h)=>v in T?j(T,v,{enumerable:!0,configurable:!0,writable:!0,value:h}):T[v]=h,S=(T,v)=>{for(var h in v||(v={}))y.call(v,h)&&A(T,h,v[h]);if(D)for(var h of D(v))O.call(v,h)&&A(T,h,v[h]);return T};const w=e.memo(({roomId:T})=>{const v=W(T);return e.createElement(g.Dr,S({autofocus:!0,disableAssets:!0,showSponsorLink:!1,showPages:!1,showMenu:!1},v))});var L=t(9168),F=t(455),C=t(7777),V=t(8160);const Z=()=>{const{whiteboardEnabled:T,whiteboardOwner:v,amIWhiteboardOwner:h,toggleWhiteboard:p}=(0,G.l)();return T?V.createElement(F.u,{title:`${v?h?"Stop whiteboard":"Can't stop whiteboard":"Start whiteboard"}`,key:"whiteboard"},V.createElement(C.Z,{onClick:p,active:!v,disabled:v&&!h,"data-testid":"white_board_btn"},V.createElement(L.Z,null))):null}},9990:(ve,Y,t)=>{t.d(Y,{Nc:()=>j,iS:()=>W});var e=t(8160),g=t(8081),P=t(9067),u=t(6905),E=t(4817),f=t(8338),I=t(4053),$=t(4334),M=t(7506),q=t(8651),K=t(6939),b=t(8485),R=t(8721),x=t(5861),ne=t(8961);const H=({type:D,duration:y})=>{const O=D===g.Mv.audio?g.Hx:g.k0,A=(0,P._U)(O.progress),S=(0,P.cw)(),w=D===g.Mv.audio?S.audioPlaylist:S.videoPlaylist;return y?e.createElement(q.i,{step:1,value:[A],onValueChange:L=>{w.seekTo(L[0]*.01*y)}}):null},B=({type:D,onToggle:y})=>{var O,A;const w=D===g.Mv.audio?g.Hx:g.k0,L=(0,P._U)(w.selectedItem);return L?e.createElement(K.x,{css:{mt:"$8"}},e.createElement(b.k,{justify:"between",css:{w:"100%"}},e.createElement(K.x,null,e.createElement(R.x,{variant:"md"},L.name),((O=L.metadata)==null?void 0:O.description)&&e.createElement(R.x,{variant:"xs"},(A=L.metadata)==null?void 0:A.description)),e.createElement(x.h,{onClick:y,css:{alignSelf:"center"},"data-testid":"playlist_collapse_btn"},e.createElement(u.Z,null)))):null},G=({type:D,css:y={}})=>{const{active:O,hasNext:A,hasPrevious:S,actions:w}=(0,ne.Z)(D);return O?e.createElement(b.k,{justify:"center",css:y},e.createElement(x.h,{disabled:!S,onClick:()=>{w.playPrevious()},"data-testid":"playlist_prev_btn"},e.createElement(E.Z,null)),e.createElement(x.h,{onClick:()=>{O.playing?w.pause():w.play(O.id)},"data-testid":"playlist_play_pause_btn"},O.playing?e.createElement(f.Z,{width:32,height:32}):e.createElement(I.Z,{width:32,height:32})),e.createElement(x.h,{disabled:!A,onClick:()=>{w.playNext()},"data-testid":"playlist_next_btn"},e.createElement($.Z,null))):null},re=()=>{const D=(0,P.cw)(),y=(0,P._U)(g.k0.volume),O=(0,P._U)(g.k0.selectedItem),A=(0,P._U)(g.Oq),S=(0,P._U)((0,g.n2)(A?.id)),w=(0,P._U)((0,g.BF)(S?.id)),L=O?y:w;return e.createElement(b.k,{align:"center",css:{color:"$white"}},e.createElement(M.Z,null),e.createElement(q.i,{css:{mx:"$4",w:"$20"},min:0,max:100,step:1,value:[Math.floor(L)],onValueChange:F=>{const C=F[0];O?D.videoPlaylist.setVolume(C):S&&D.setVolume(C,S.id)},thumbStyles:{w:"$6",h:"$6"}}))},W=({onToggle:D})=>{const{active:y}=(0,ne.Z)(g.Mv.audio);return y?e.createElement(K.x,{css:{p:"$8",borderTop:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(G,{type:g.Mv.audio}),e.createElement(H,{type:g.Mv.audio,duration:y.duration}),e.createElement(B,{type:g.Mv.audio,onToggle:D})):null},j=({children:D})=>{const{active:y}=(0,ne.Z)(g.Mv.video);return e.createElement(K.x,{css:{p:"$8",mt:"-$24",w:"100%",zIndex:1,"@lg":{mt:0,p:"$6"}}},y&&e.createElement(H,{type:g.Mv.video,duration:y.duration}),e.createElement(b.k,{align:"center",justify:"between"},e.createElement(re,null),y&&e.createElement(G,{css:{flex:"1 1 0"}}),D))}},9477:(ve,Y,t)=>{t.d(Y,{Z:()=>re});var e=t(8160),g=t(8379),P=t(8523),u=t.n(P),E=t(9067),f=t(8081),I=t(6532),$=t(7854),M=t(1280),q=t(4299),K=t(3074),b=t(3844),R=t(6567),x=t(6773),ne=t(5581);const H={position:"unset",width:"100%",textAlign:"center",transform:"none",mt:"$2",flexShrink:0},B=({peerId:W,width:j="100%",height:D="100%"})=>{const y=(0,E._U)((0,f.K6)(W)),O=(0,E._U)((0,f.Nm)(W)),A=(0,x.L3)(ne.JZ.isAudioOnly),S=(0,x.tQ)(),[w,L]=(0,e.useState)(!1),F=(0,x.L3)(ne.JZ.showStatsOnTiles),C=(0,b.O)({peerName:O.name,isLocal:!1,track:y}),V=(0,e.useRef)(null),[Z,T]=(0,e.useState)(!1),v=(0,g.Z)(V,Z,{onClose:()=>T(!1)}),h=u().isEnabled,p=(0,E._U)((0,f.Qq)(O?.id));return e.createElement(M.i.Root,{css:{width:j,height:D},"data-testid":"screenshare_tile"},O?e.createElement(M.i.Container,{transparentBg:!0,ref:V,css:{flexDirection:"column"},onMouseEnter:()=>L(!0),onMouseLeave:()=>{L(!1)}},F?e.createElement(q.q8,{audioTrackID:p?.id,videoTrackID:y?.id}):null,h&&!S?e.createElement(M.i.FullScreenButton,{onClick:()=>T(!Z)},v?e.createElement(I.Z,null):e.createElement($.Z,null)):null,y?e.createElement(K.n,{screenShare:!0,mirror:O.isLocal&&y?.source==="regular",attach:!A,trackId:y.id,threshold:.05}):null,e.createElement(M.i.Info,{css:H},C),w&&!S&&!O?.isLocal?e.createElement(R.Z,{isScreenshare:!0,peerID:O?.id,audioTrackID:p?.id,videoTrackID:y?.id}):null):null)},re=e.memo(B)},6567:(ve,Y,t)=>{t.d(Y,{Z:()=>W});var e=t(8160),g=t(9067),P=t(8081),u=t(4866),E=t(4896),f=t(4328),I=t(8111),$=t(7923),M=t(6548),q=t(8981),K=t(7506),b=t(9540),R=t(4685),x=t(8414),ne=t(8485),H=t(8651),B=t(5581),G=(j,D,y)=>new Promise((O,A)=>{var S=F=>{try{L(y.next(F))}catch(C){A(C)}},w=F=>{try{L(y.throw(F))}catch(C){A(C)}},L=F=>F.done?O(F.value):Promise.resolve(F.value).then(S,w);L((y=y.apply(j,D)).next())});const W=({audioTrackID:j,videoTrackID:D,peerID:y,isScreenshare:O=!1})=>{const A=(0,g.cw)(),{removeOthers:S}=(0,g._U)(P.AI),{isAudioEnabled:w,isVideoEnabled:L,setVolume:F,toggleAudio:C,toggleVideo:V,volume:Z}=(0,u.T)(j,D),{sendEvent:T}=(0,E.j)({type:B.fU});return S||C||V||F?e.createElement(x.R.Root,null,e.createElement(x.R.Trigger,{"data-testid":"participant_menu_btn"},e.createElement(f.Z,null)),e.createElement(x.R.Content,{side:"top",align:"end",sideOffset:8},V?e.createElement(x.R.ItemButton,{onClick:V,"data-testid":L?"mute_video_participant_btn":"unmute_video_participant_btn"},L?e.createElement(I.Z,null):e.createElement($.Z,null),e.createElement("span",null,`${L?"Mute":"Request Unmute"}`)):null,C?e.createElement(x.R.ItemButton,{onClick:C,"data-testid":L?"mute_audio_participant_btn":"unmute_audio_participant_btn"},w?e.createElement(M.Z,null):e.createElement(q.Z,null),e.createElement("span",null,`${w?"Mute":"Request Unmute"}`)):null,j?e.createElement(x.R.VolumeItem,{"data-testid":"participant_volume_slider"},e.createElement(ne.k,{align:"center",gap:1},e.createElement(K.Z,null)," ",e.createElement("span",null,"Volume (",Z,")")),e.createElement(H.i,{css:{my:"0.5rem"},step:5,value:[Z],onValueChange:v=>F(v[0])})):null,S?e.createElement(x.R.RemoveItem,{onClick:()=>G(void 0,null,function*(){try{yield A.removePeer(y,"")}catch{}}),"data-testid":"remove_participant_btn"},e.createElement(b.Z,null),e.createElement("span",null,"Remove Participant")):null,S&&O?e.createElement(x.R.RemoveItem,{onClick:()=>T({})},e.createElement(R.Z,null),e.createElement("span",null,"Stop Screenshare")):null)):null}},8051:(ve,Y,t)=>{t.d(Y,{Z:()=>re});var e=t(8160),g=t(5683),P=t(871),u=t(9314),E=t(8613),f=t(8534),I=t(4718),$=t(3385),M=t(4674);const q=({page:W,setPage:j,numPages:D})=>{const y=W===0,O=W===D-1,A=()=>{j(Math.min(W+1,D-1))},S=()=>{j(Math.max(W-1,0))};return e.createElement(M.I.Root,null,e.createElement(M.I.Chevron,{disabled:y,onClick:S},e.createElement(I.Z,{width:16,height:16,style:{cursor:y?"not-allowed":"pointer"}})),e.createElement(M.I.Dots,null,[...Array(D)].map((w,L)=>e.createElement(M.I.Dot,{key:L,active:W===L,onClick:()=>j(L)}))),e.createElement(M.I.Chevron,{disabled:O,onClick:A},e.createElement($.Z,{width:16,height:16,style:{cursor:O?"not-allowed":"pointer"}})))};var K=t(9477),b=t(8329),R=t(9112),x=t(6773),ne=t(9478);const H=({maxTileCount:W,peers:j,maxColCount:D,maxRowCount:y,includeScreenShareForPeer:O})=>{const{aspectRatio:A}=(0,u.Fg)(),S=(0,R.M)("headlessConfig","tileOffset"),w=(0,x.tQ)(),{ref:L,pagesWithTiles:F}=(0,P.i)({peers:j,maxTileCount:W,maxColCount:D,maxRowCount:y,includeScreenShareForPeer:O,aspectRatio:A,offsetY:G({isHeadless:w,tileOffset:S})}),[C,V]=(0,e.useState)(0);(0,e.useEffect)(()=>{C>=F.length&&V(0)},[F.length,C]);const Z=ne.T.freezeVideoList();return e.createElement(E.d.Root,{ref:L},e.createElement(E.d.Container,null,F&&F.length>0?F.map((T,v)=>e.createElement(g.f,{freeze:Z&&C!==v,key:v},e.createElement(E.d.View,{css:{left:(0,f.I)(v,C),transition:"left 0.3s ease-in-out"}},T.map((h,p)=>{var _,U,J,se;return((_=h.track)==null?void 0:_.source)==="screen"?e.createElement(K.Z,{key:h.track.id,width:h.width,height:h.height,peerId:h.peer.id}):e.createElement(b.Z,{key:((U=h.track)==null?void 0:U.id)||h.peer.id,width:h.width,height:h.height,peerId:(J=h.peer)==null?void 0:J.id,trackId:(se=h.track)==null?void 0:se.id})})))):null),!w&&F.length>1?e.createElement(q,{page:C,setPage:V,numPages:F.length}):null)},B=e.memo(H),G=({offset:W,isHeadless:j})=>!j||typeof W!="number"?32:W,re=B},8329:(ve,Y,t)=>{t.d(Y,{Z:()=>O});var e=t(8160),g=t(8081),P=t(9067),u=t(8981),E=t(3712),f=t(4593),I=t(5470),$=t(1280),M=t(4299),q=t(3074),K=t(1959),b=t(2173),R=t(3844),x=t(6567),ne=t(9112),H=t(6773),B=t(5581);const G=({peerId:A,trackId:S,width:w,height:L})=>{const F=S?(0,g.GP)(S):(0,g.t$)(A),C=(0,P._U)(F),V=(0,P._U)((0,g.I_)(A)),Z=(0,P._U)((0,g.L6)(A)),T=(0,P._U)(g.I3),v=(0,H.L3)(B.JZ.isAudioOnly),h=(0,H.L3)(B.JZ.mirrorLocalVideo),p=(0,H.L3)(B.JZ.showStatsOnTiles),_=(0,H.tQ)(),U=!(0,P._U)((0,g.xn)(A)),J=!C?.enabled,[se,z]=(0,e.useState)(!1),ee=(0,I.W)(Z?.id),le=C?.degraded,oe=T===A,he=(0,R.O)({peerName:V,track:C,isLocal:oe}),ce=(0,e.useCallback)(Ce=>{z(Ce.type==="mouseenter")},[]),ae=(0,ne.M)("headlessConfig"),Te=_&&ae?.hideTileName;return e.createElement($.i.Root,{css:{width:w,height:L,padding:y({isHeadless:_,offset:ae?.tileOffset})},"data-testid":`participant_tile_${V}`},V!==void 0?e.createElement($.i.Container,{onMouseEnter:ce,onMouseLeave:ce,ref:_&&ae?.hideAudioLevel?void 0:ee},e.createElement(b.Z,{hideLabel:Te,name:he,isTile:!0,peerId:A,width:w}),p?e.createElement(M.q8,{audioTrackID:Z?.id,videoTrackID:C?.id,peerID:A}):null,C?e.createElement(q.n,{trackId:C?.id,attach:oe?void 0:!v,mirror:h&&A===T&&C?.source==="regular"&&C?.facingMode!=="environment",degraded:le,"data-testid":"participant_video_tile"}):null,e.createElement($.i.AvatarContainer,null,J||le||!oe&&v?e.createElement(K.q,{name:V||"","data-testid":"participant_avatar_icon"}):null),D({hideTileAudioMute:ae?.hideTileAudioMute,isHeadless:_,isAudioMuted:U})?e.createElement($.i.AudioIndicator,{"data-testid":"participant_audio_mute_icon"},e.createElement(u.Z,null)):null,se&&!_&&!oe?e.createElement(x.Z,{peerID:A,audioTrackID:Z?.id,videoTrackID:C?.id}):null,e.createElement(W,{peerId:A})):null)},re={top:"$4",left:"$4"},W=({peerId:A})=>{const S=(0,P._U)((0,g.cH)(A)),w=S?.isHandRaised||!1,L=S?.isBRBOn||!1;return e.createElement(e.Fragment,null,w?e.createElement($.i.AttributeBox,{css:re,"data-testid":"raiseHand_icon_onTile"},e.createElement(E.Z,{width:40,height:40})):null,L?e.createElement($.i.AttributeBox,{css:re,"data-testid":"brb_icon_onTile"},e.createElement(f.Z,{width:40,height:40})):null)},j=e.memo(G),D=({hideTileAudioMute:A,isHeadless:S,isAudioMuted:w})=>S?w&&!A:w,y=({isHeadless:A,offset:S})=>{if(!(!A||typeof S!="number"))return S===0?0:void 0},O=j},6197:(ve,Y,t)=>{t.r(Y),t.d(Y,{default:()=>Gn});var e=t(8160),g=t(5396),P=t(3738),u=t(9067),E=t(8081),f=t(8485),I=t(6939),$=t(5374),M=t(9660),q=t(6395),K=t(5349),b=t(6773),R=t(5581),x=t(8160);const ne=({showStats:l})=>{const n=(0,u._U)(E.BK);return x.createElement(f.k,{css:{size:"100%","@lg":{flexDirection:"column"}}},x.createElement(H,null),x.createElement(K.O,{peers:n,showStatsOnTiles:l}))},H=()=>{const{amIScreenSharing:l,toggleScreenShare:n}=(0,M.N)(q.m),[s,o]=(0,b.$h)(R._8.embedConfig),[i,a]=(0,e.useState)(!1),c=(0,e.useRef)(!1),d=s.url,r=(0,e.useRef)(),m=(0,e.useCallback)(()=>{d&&o({url:""})},[d,o]);return(0,e.useEffect)(()=>{s.shareScreen&&!l&&!i&&!c.current&&(c.current=!0,n({forceCurrentTab:!0,cropElement:r.current}).then(()=>{a(!0)}).catch(m).finally(()=>{c.current=!1}))},[]),(0,e.useEffect)(()=>(i&&!l&&m(),()=>{i&&l&&n()}),[i,l,m,n]),x.createElement(I.x,{ref:r,css:{mx:"$8",flex:"3 1 0","@lg":{flex:"2 1 0",display:"flex",alignItems:"center"}}},x.createElement("iframe",{src:d,title:d,style:{width:"100%",height:"100%",border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture fullscreen",referrerPolicy:"no-referrer"}))},B=ne,G=l=>(0,u._U)((0,E.Dv)(R._8.appLayout,l)),re=()=>{const l=G("center")||[],n=G("sidepane")||[],s=(0,b.L3)(R.JZ.maxTileCount),o=(0,u._U)(E.BK),i=(0,u._U)(E.I3),a=o.filter(r=>l.includes(r.roleName)),c=o.filter(r=>n.includes(r.roleName));let d=a.length>0&&c.length>0;if(a.length===0){const r=o.length===1&&o[0].id===i,m=c.length===0;d=r||m}return e.createElement(f.k,{css:{size:"100%"},direction:{"@initial":"row","@md":"column"}},e.createElement(K.m,{peers:d?a:o,maxTileCount:s,allowRemoteMute:!1,hideSidePane:!d,totalPeers:o.length}),d&&e.createElement(K.O,{peers:c,totalPeers:o.length}))};var W=t(535),j=t(2482),D=t(9121),y=t(9112),O=t(2197),A=t(759);const S=e.lazy(()=>t.e(421).then(t.bind(t,9421))),w=e.lazy(()=>Promise.all([t.e(26),t.e(973)]).then(t.bind(t,5973))),L=e.lazy(()=>t.e(507).then(t.bind(t,507))),F=()=>{const l=(0,u._U)(E.fo),n=(0,u._U)(E.pk),s=(0,u._U)(E.Vq),o=(0,u._U)(E.Oq),{whiteboardOwner:i}=(0,D.l0)(),a=(0,u._U)(E.ln);(0,A.T4)(),(0,O.WG)();const c=(0,u.cw)(),d=(0,b.tQ)(),r=(0,y.M)("headlessConfig","uiMode"),{uiViewMode:m,isAudioOnly:k}=(0,b.L3)(),X=(0,b.ZP)(),ie=(0,b.PS)();if((0,e.useEffect)(()=>{if(!a)return;const Ae=JSON.parse({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",TERM_PROGRAM:"Apple_Terminal",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",NVM_CD_FLAGS:"-q",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",TERM:"xterm-256color",SHELL:"/bin/zsh",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_config_global_prefix:"/Users/richwhalley/.nvm/versions/node/v19.1.0",TERM_PROGRAM_VERSION:"445",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/richwhalley/Documents/GitHub/100ms-chat",USER:"richwhalley",NVM_DIR:"/Users/richwhalley/.nvm",npm_config_globalconfig:"/Users/richwhalley/.nvm/versions/node/v19.1.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/Documents/GitHub/node_modules/.bin:/Users/richwhalley/Documents/node_modules/.bin:/Users/richwhalley/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/Documents/GitHub/node_modules/.bin:/Users/richwhalley/Documents/node_modules/.bin:/Users/richwhalley/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_json:"/Users/richwhalley/Documents/GitHub/100ms-chat/package.json",__CFBundleIdentifier:"com.apple.Terminal",npm_config_init_module:"/Users/richwhalley/.npm-init.js",npm_config_userconfig:"/Users/richwhalley/.npmrc",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"0.1.4",HOME:"/Users/richwhalley",SHLVL:"3",LOGNAME:"richwhalley",npm_config_cache:"/Users/richwhalley/.npm",npm_lifecycle_script:"webpack --node-env production",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_config_user_agent:"npm/8.19.3 node/v19.1.0 darwin x64 workspaces/false",npm_config_prefix:"/Users/richwhalley/.nvm/versions/node/v19.1.0",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_AUDIO_PLAYLIST||"[]"),Ne=JSON.parse({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",TERM_PROGRAM:"Apple_Terminal",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",NVM_CD_FLAGS:"-q",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",TERM:"xterm-256color",SHELL:"/bin/zsh",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_config_global_prefix:"/Users/richwhalley/.nvm/versions/node/v19.1.0",TERM_PROGRAM_VERSION:"445",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/richwhalley/Documents/GitHub/100ms-chat",USER:"richwhalley",NVM_DIR:"/Users/richwhalley/.nvm",npm_config_globalconfig:"/Users/richwhalley/.nvm/versions/node/v19.1.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/Documents/GitHub/node_modules/.bin:/Users/richwhalley/Documents/node_modules/.bin:/Users/richwhalley/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/Documents/GitHub/node_modules/.bin:/Users/richwhalley/Documents/node_modules/.bin:/Users/richwhalley/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_json:"/Users/richwhalley/Documents/GitHub/100ms-chat/package.json",__CFBundleIdentifier:"com.apple.Terminal",npm_config_init_module:"/Users/richwhalley/.npm-init.js",npm_config_userconfig:"/Users/richwhalley/.npmrc",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"0.1.4",HOME:"/Users/richwhalley",SHLVL:"3",LOGNAME:"richwhalley",npm_config_cache:"/Users/richwhalley/.npm",npm_lifecycle_script:"webpack --node-env production",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_config_user_agent:"npm/8.19.3 node/v19.1.0 darwin x64 workspaces/false",npm_config_prefix:"/Users/richwhalley/.nvm/versions/node/v19.1.0",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_VIDEO_PLAYLIST||"[]");Ne.length>0&&c.videoPlaylist.setList(Ne),Ae.length>0&&c.audioPlaylist.setList(Ae)},[a,c]),!l)return null;let N;return l===X?N=w:ie?N=B:i?N=S:(n&&n.id!==s?.id||o)&&!k?N=W.Z:m===R.FU||d&&r===R.FU?N=L:N=re,e.createElement(e.Suspense,{fallback:e.createElement($.Z,null)},e.createElement(f.k,{css:{size:"100%",position:"relative"}},e.createElement(N,null),e.createElement(j.Z,null)))};var C=t(510),V=t(455),Z=t(1554),T=t(6722),v=t(8287),h=t(9057),p=t(8721),_=t(9024),U=t(7777),J=t(9990);function se(l){if(!l)return"";let n=Math.floor(l/60);n<10&&(n=`0${String(n)}`);let s=Math.floor(l%60);return s<10&&(s=`0${String(s)}`),`${n}:${s}`}const z=e.memo(({name:l,metadata:n,duration:s,selected:o,onClick:i})=>e.createElement(_.L.Item,{css:{flexDirection:"column",alignItems:"flex-start",h:"$18",p:"$8","&:hover":{cursor:"pointer",bg:"$menuBg"},"&:focus-visible":{bg:"$menuBg"}},onClick:i},e.createElement(f.k,{align:"center",justify:"between",css:{width:"100%",minHeight:0}},e.createElement(p.x,{variant:"md",css:{color:o?"$brandDefault":"$textPrimary"}},l),e.createElement(p.x,{variant:"xs"},se(s))),n?.description&&e.createElement(p.x,{variant:"xs",css:{mt:"$4"}},n?.description)));var ee=t(8961),le=Object.defineProperty,oe=Object.defineProperties,he=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Ce=(l,n,s)=>n in l?le(l,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[n]=s,te=(l,n)=>{for(var s in n||(n={}))ae.call(n,s)&&Ce(l,s,n[s]);if(ce)for(var s of ce(n))Te.call(n,s)&&Ce(l,s,n[s]);return l},de=(l,n)=>oe(l,he(n)),pe=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});const fe=({type:l,actions:n})=>e.createElement(e.Fragment,null,e.createElement(p.x,{as:"label",htmlFor:`${l}PlaylistBrowse`,variant:"sm",css:{cursor:"pointer",mr:"$2"}},"Browse"),e.createElement("input",{type:"file",id:`${l}PlaylistBrowse`,accept:l===E.Mv.audio?"audio/*":"video/*",onChange:s=>{const o=s.target.files[0],i=o.lastModified;n.setList([{type:l,id:i,name:o.name,url:URL.createObjectURL(o)}]),n.play(i)},style:{display:"none"}})),Re=({type:l})=>{const n=l===E.Mv.audio,{active:s,list:o,actions:i}=(0,ee.Z)(l),[a,c]=(0,e.useState)(!1),[d,r]=(0,e.useState)(!1);return!(0,u._U)(E.xf).screen||o.length===0?null:e.createElement(e.Fragment,null,e.createElement(_.L.Root,{open:a,onOpenChange:c},e.createElement(_.L.Trigger,{asChild:!0,"data-testid":l===E.Mv.audio?"audio_playlist":"video_playlist"},e.createElement(U.Z,{active:!s},e.createElement(V.u,{title:n?"Audio Playlist":"Video Playlist"},e.createElement(I.x,null,n?e.createElement(T.Z,null):e.createElement(v.Z,null))))),e.createElement(_.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"unset",width:"$60",p:"$0",bg:"$bgSecondary",border:"1px solid $menuBg"}},e.createElement(f.k,{align:"center",css:{p:"$4 $8",borderBottom:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(p.x,{variant:"md",css:{flex:"1 1 0"}},n?"Audio Player":"Video Playlist"),e.createElement(fe,{type:l,actions:i}),e.createElement(U.Z,{css:{mr:"-$4"},onClick:()=>pe(void 0,null,function*(){s&&(yield i.stop()),c(!1),r(!1)})},e.createElement(h.Z,{width:24,height:24}))),!d&&e.createElement(I.x,{css:{maxHeight:"$96",overflowY:"auto"}},o.map(k=>e.createElement(z,de(te({key:k.id},k),{onClick:X=>pe(void 0,null,function*(){X.preventDefault(),yield i.play(k.id),n||c(!1)})})))),n&&e.createElement(J.iS,{onToggle:()=>r(k=>!k)}))))};var Oe=t(8275),ge=t(6408),Fe=t(1243),Ze=t(32),pt=t(6422),Ke=t(7158),_t=t(4241),ft=t(8546),gt=t(8703),je=t(8981),Pt=t(3510),ze=t(8565),At=t(7632),ke=t(9290),Ye=t(7281),yt=t(198),Tt=t(5231),St=t(8198),Q=t(622),_e=t(7688),Ct=t(1529),Rt=t(5513),ye=t(7097),Me=t(9953),Xe=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});const Ot=({open:l,onOpenChange:n})=>{const s=(0,u._U)(E.AI),o=(0,u._U)((0,E.EP)(R._8.recordingUrl)),[i,a]=(0,e.useState)(R.w7),[c,d]=(0,b.$h)(R._8.recordingStarted),{isBrowserRecordingOn:r,isStreamingOn:m,isHLSRunning:k}=(0,Ke.v)(),X=(0,u.cw)();return!s?.browserRecording||k?null:r?e.createElement(Q.V.Root,{open:l,onOpenChange:n},e.createElement(Q.V.Portal,null,e.createElement(Q.V.Content,{css:{width:"min(400px,80%)",p:"$10",bg:"#201617"}},e.createElement(Q.V.Title,null,e.createElement(f.k,{gap:2,css:{c:"$error"}},e.createElement(St.Z,null),e.createElement(p.x,{css:{c:"inherit"},variant:"h6"},"End Recording"))),e.createElement(p.x,{variant:"sm",css:{c:"$textMedEmp",my:"$8"}},"Are you sure you want to end recording? You can\u2019t undo this action."),e.createElement(f.k,{justify:"end",css:{mt:"$12"}},e.createElement(Q.V.Close,{asChild:!0},e.createElement(_e.z,{outlined:!0,css:{borderColor:"$secondaryLight",mr:"$4"}},"Don't end")),e.createElement(_e.z,{"data-testid":"stop_recording_confirm_mobile",variant:"danger",icon:!0,onClick:()=>Xe(void 0,null,function*(){try{yield X.stopRTMPAndRecording()}catch(ie){ye.y.addToast({title:ie.message,variant:"error"})}n(!1)})},"End recording"))))):e.createElement(Q.V.Root,{open:l,onOpenChange:n},e.createElement(Q.V.Content,{css:{width:"min(400px,80%)",p:"$10"}},e.createElement(Q.V.Title,null,e.createElement(p.x,{variant:"h6"},"Start Recording")),e.createElement(Ct.P,{testId:"recording_resolution_mobile",css:{flexDirection:"column",alignItems:"start"},onResolutionChange:a}),e.createElement(_e.z,{"data-testid":"start_recording_confirm_mobile",variant:"primary",icon:!0,css:{ml:"auto"},type:"submit",disabled:c||m,onClick:()=>Xe(void 0,null,function*(){try{d(!0),yield X.startRTMPOrRecording({meetingURL:o||(0,Me.Il)(),resolution:(0,Rt.u)(i),record:!0})}catch(ie){ie.message.includes("stream already running")?ye.y.addToast({title:"Recording already running",variant:"error"}):ye.y.addToast({title:ie.message,variant:"error"}),d(!1)}n(!1)})},"Start")))};var bt=t(7273),Ut=t(1118),$e=t(6081),It=t(4634),Dt=t(4791);const Mt=({onOpenChange:l})=>{var n,s;const o=Lt(),i=(0,e.useMemo)(()=>[{id:"local-peer",label:"Local Peer Stats"},...o],[o]),[a,c]=(0,e.useState)("local-peer"),[d,r]=(0,b.iz)(R.JZ.showStatsOnTiles),[m,k]=(0,e.useState)(!1),X=(0,e.useRef)(),ie=(0,Dt.s)();return(0,e.useEffect)(()=>{a!=="local-peer"&&!o.find(N=>N.id===a)&&c("local-peer")},[o,a]),e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:l},e.createElement(Q.V.Portal,null,e.createElement(Q.V.Overlay,null),e.createElement(Q.V.Content,{css:{width:"min(500px, 95%)"}},e.createElement(Q.V.Title,{css:{p:"$4 0"}},e.createElement(f.k,{justify:"between"},e.createElement(f.k,{align:"center",css:{mb:"$1"}},e.createElement(p.x,{variant:"h6",inline:!0},"Stats For Nerds")),e.createElement(Q.V.DefaultClose,{"data-testid":"stats_dialog_close_icon"}))),e.createElement(bt.E,{css:{mt:"0.8rem"}}),e.createElement(f.k,{justify:"start",gap:4,css:{m:"$10 0"}},e.createElement(Ut.r,{checked:d,onCheckedChange:r}),e.createElement(p.x,{variant:"body2",css:{fontWeight:"$semiBold"}},"Show Stats on Tiles")),e.createElement(f.k,{direction:"column",css:{mb:"$12",position:"relative",minWidth:0}},e.createElement($e._,{variant:"body2"},"Stats For"),e.createElement(_.L.Root,{"data-testid":"dialog_select_Stats For",open:m,onOpenChange:k},e.createElement(It.l,{title:((n=i.find(({id:N})=>N===a))==null?void 0:n.label)||"Select Stats",css:{mt:"$4"},titleCSS:{mx:0},open:m,ref:X}),e.createElement(_.L.Portal,null,e.createElement(_.L.Content,{align:"start",sideOffset:8,css:{w:(s=X.current)==null?void 0:s.clientWidth,zIndex:1e3}},i.map(N=>e.createElement(_.L.Item,{key:N.id,onClick:()=>{c(N.id)},css:{px:"$9",bg:N.id===a?ie:void 0,c:N.id===a?"$white":"$textPrimary"}},N.label)))))),a==="local-peer"?e.createElement(wt,null):e.createElement(Nt,{trackID:a}))))},Lt=()=>{const l=(0,u._U)(E.zK),n=(0,u._U)(E.iZ);return(0,e.useMemo)(()=>Object.values(l).map(o=>{var i;const a=(i=n[o.peerId])==null?void 0:i.name;return{id:o.id,label:`${a} ${o.source} ${o.type}`}}),[l,n])},wt=()=>{var l,n,s,o,i,a;const c=(0,u.p5)(E.fA.localPeerStats);return c?e.createElement(f.k,{css:{flexWrap:"wrap",gap:"$10"}},e.createElement(me,{label:"Packets Lost",value:(l=c.subscribe)==null?void 0:l.packetsLost}),e.createElement(me,{label:"Jitter",value:(n=c.subscribe)==null?void 0:n.jitter}),e.createElement(me,{label:"Publish Bitrate",value:be((s=c.publish)==null?void 0:s.bitrate,"b/s")}),e.createElement(me,{label:"Subscribe Bitrate",value:be((o=c.subscribe)==null?void 0:o.bitrate,"b/s")}),e.createElement(me,{label:"Total Bytes Sent",value:be((i=c.publish)==null?void 0:i.bytesSent)}),e.createElement(me,{label:"Total Bytes Received",value:be((a=c.subscribe)==null?void 0:a.bytesReceived)})):null},Nt=({trackID:l})=>{const n=(0,u.p5)(E.fA.trackStatsByID(l));if(!n)return null;const s=n.type.includes("inbound");return e.createElement(f.k,{css:{flexWrap:"wrap",gap:"$10"}},e.createElement(me,{label:"Type",value:n.type+" "+n.kind}),e.createElement(me,{label:"Bitrate",value:be(n.bitrate,"b/s")}),e.createElement(me,{label:"Packets Lost",value:n.packetsLost||"-"}),e.createElement(me,{label:"Jitter",value:n.jitter||"-"}),e.createElement(me,{label:s?"Bytes Received":"Bytes Sent",value:be(s?n.bytesReceived:n.bytesSent)}),n.kind==="video"&&e.createElement(e.Fragment,null,e.createElement(me,{label:"Framerate",value:n.framesPerSecond}),!s&&e.createElement(me,{label:"Quality Limitation Reason",value:n.qualityLimitationReason||"-"})))},me=({label:l,value:n})=>e.createElement(I.x,{css:{bg:"$surfaceLight",w:"calc(50% - $6)",p:"$8",r:"$3"}},e.createElement(p.x,{variant:"overline",css:{fontWeight:"$semiBold",color:"$textMedEmp",textTransform:"uppercase"}},l," "),e.createElement(p.x,{variant:"sub1",css:{fontWeight:"$semiBold",color:"$textHighEmp"}},n)),be=(l,n="B",s=2)=>{if(l===0)return"0 "+n;const o=1024,i=s<0?0:s,a=["","K","M","G","T","P","E","Z","Y"].map(d=>d+n),c=Math.floor(Math.log(l)/Math.log(o));return parseFloat((l/Math.pow(o,c)).toFixed(i))+" "+a[c]};var xt=t(6635),Je=t(3620),Ht=Object.defineProperty,Ft=Object.defineProperties,$t=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,qe=(l,n,s)=>n in l?Ht(l,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[n]=s,Gt=(l,n)=>{for(var s in n||(n={}))Vt.call(n,s)&&qe(l,s,n[s]);if(Qe)for(var s of Qe(n))Bt.call(n,s)&&qe(l,s,n[s]);return l},Wt=(l,n)=>Ft(l,$t(n)),et=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});const Zt=({onOpenChange:l})=>{const[n,s]=(0,Je.o4)(Je.lN.PREVIEW),o=(0,u.cw)(),i=(0,u._U)(E.lA),[a,c]=(0,e.useState)(i),d=()=>et(void 0,null,function*(){const r=a.trim();if(!(!r||r===i))try{yield o.changeName(r),s(Wt(Gt({},n||{}),{name:r}))}catch(m){console.error("failed to update name",m),ye.y.addToast({title:m.message})}finally{l(!1)}});return e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:l},e.createElement(Q.V.Portal,null,e.createElement(Q.V.Overlay,null),e.createElement(Q.V.Content,{css:{width:"min(400px,80%)",p:"$10"}},e.createElement(Q.V.Title,{css:{p:"0 $4"}},e.createElement(p.x,{variant:"h6"}," Change Name")),e.createElement("form",{onSubmit:r=>et(void 0,null,function*(){r.preventDefault(),yield d()})},e.createElement(f.k,{justify:"center",align:"center",css:{my:"$8",w:"100%"}},e.createElement(xt.I,{css:{width:"100%"},value:a,onChange:r=>{c(r.target.value)},autoComplete:"name",required:!0,"data-testid":"change_name_field"})),e.createElement(f.k,{justify:"between",align:"center",css:{width:"100%",gap:"$md",mt:"$10"}},e.createElement(I.x,{css:{w:"50%"}},e.createElement(Q.V.Close,{css:{w:"100%"}},e.createElement(_e.z,{variant:"standard",css:{w:"100%"},outlined:!0,type:"submit",disabled:!i},"Cancel"))),e.createElement(I.x,{css:{w:"50%"}},e.createElement(_e.z,{variant:"primary",css:{width:"100%"},type:"submit",disabled:!a.trim()||a.trim()===i,"data-testid":"popup_change_btn"},"Change")))))))};var tt=t(8953),Kt=t(5873),jt=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});const zt=({onClick:l})=>{const n=(0,A.ED)(),s=(0,u._U)(E.AI),o=(0,u._U)(E.I3),i=(0,u._U)(E.fo),a=(0,u.cw)(),c=(0,Ze.Z)(ke.vc.media.sm),d=G("selfRoleChangeTo"),r=(0,e.useMemo)(()=>(0,Me.tN)(d,n),[n,d]);return s.changeRole?c?e.createElement(_.L.Item,{onClick:l},e.createElement(tt.Z,null),e.createElement(p.x,{variant:"sm",css:{mx:"$4"}},"Change My Role")):e.createElement(_.L.SubMenu,null,e.createElement(_.L.TriggerItem,{"data-testid":"change_my_role_btn"},e.createElement(tt.Z,null),e.createElement(p.x,{variant:"sm",css:{flex:"1 1 0",mx:"$4"}},"Change My Role"),e.createElement(Kt.Z,null)),e.createElement(_.L.SubMenuContent,{sideOffset:2,alignOffset:-5,css:{"@md":{w:"$64"}}},r.map((m,k)=>e.createElement(_.L.Item,{key:m,css:{justifyContent:"space-between"},onClick:()=>jt(void 0,null,function*(){try{yield a.changeRole(o,m,!0)}catch(X){ye.y.addToast({title:X.message})}}),"data-testid":"change_to_role_"+m},e.createElement(p.x,{variant:"sm"},m),i===m&&e.createElement(ze.Z,{width:16,height:16}))))):null};var nt=t(3055),ue=t(4778);const kt=({setShowOpenUrl:l})=>window.CropTarget?e.createElement(_.L.Item,{onClick:()=>{l(!0)},"data-testid":"embed_url_btn"},e.createElement(nt.Z,null),e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},"Embed URL")):null;function Yt({onOpenChange:l}){const[n,s]=(0,b.$h)(R._8.embedConfig),[o,i]=(0,e.useState)(n?.url||""),a=!!n?.url,c=a&&o&&o!==n.url;return e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:l},e.createElement(ue.cZ,{title:"Embed URL",Icon:nt.Z},e.createElement(ue.OD,{title:"URL",value:o,onChange:i,placeholder:"https://www.youtube.com/embed/dQw4w9WgXcQ",type:"url"}),e.createElement(ue.DP,null,e.createElement(p.x,null,"Embed a url and share with everyone in the room. Ensure that you're sharing the current tab when the prompt opens. Note that not all websites support being embedded.")),e.createElement(ue.DP,{justify:"end"},a?e.createElement(e.Fragment,null,e.createElement(_e.z,{variant:"primary",type:"submit",disabled:!c,onClick:()=>{s({url:o,shareScreen:n.shareScreen}),l(!1)},"data-testid":"embed_url_btn",css:{mr:"$4"}},"Update Embed"),e.createElement(_e.z,{variant:"danger",type:"submit",onClick:()=>{s({url:""}),l(!1)},"data-testid":"embed_url_btn"},"Stop Embed")):e.createElement(e.Fragment,null,e.createElement(_e.z,{variant:"primary",type:"submit",disabled:!o.trim(),onClick:()=>{s({url:o}),l(!1)},"data-testid":"embed_url_btn",css:{mr:"$4"}},"Just Embed"),e.createElement(_e.z,{variant:"primary",type:"submit",disabled:!o.trim(),onClick:()=>{s({url:o,shareScreen:!0}),l(!1)},"data-testid":"embed_url_btn"},"Embed and Share")))))}var Xt=t(7854),Jt=t(8523),Pe=t.n(Jt),Qt=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});const qt=()=>{const[l,n]=(0,e.useState)(Pe().isFullscreen),s=(0,e.useCallback)(()=>Qt(void 0,null,function*(){if(!Pe().isEnabled){ye.y.addToast({title:"Fullscreen feature not supported"});return}try{l?yield Pe().exit():yield Pe().request()}catch(o){ye.y.addToast({title:o.message})}}),[l]);return(0,e.useEffect)(()=>{const o=()=>{n(Pe().isFullscreen)};return Pe().isEnabled&&Pe().on("change",o),()=>{Pe().isEnabled&&Pe().off("change",o)}},[]),{allowed:Pe().isEnabled,isFullscreen:l,toggleFullscreen:s}},en=()=>{const{allowed:l,isFullscreen:n,toggleFullscreen:s}=qt();return l?e.createElement(_.L.Item,{onClick:()=>{s()},"data-testid":"full_screen_btn"},e.createElement(Xt.Z,null),e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},n?"Exit ":"Go ","Fullscreen")):null};var Le=t(8673),tn=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});const nn=[{label:"All Track Sources",value:""},{label:"regular",value:"regular"},{label:"screen",value:"screen"},{label:"audioplaylist",value:"audioplaylist"},{label:"videoplaylist",value:"videoplaylist"}],sn=[{label:"All Track Types",value:""},{label:"audio",value:"audio"},{label:"video",value:"video"}],ln=({onOpenChange:l})=>{const n=(0,A.ED)(),s=(0,u.cw)(),[o,i]=(0,e.useState)(!1),[a,c]=(0,e.useState)(),[d,r]=(0,e.useState)(),[m,k]=(0,e.useState)(),X=(0,e.useCallback)(()=>tn(void 0,null,function*(){yield s.setRemoteTracksEnabled({enabled:o,type:a,source:m,roles:d?[d]:void 0}),l(!1)}),[d,o,a,m,s,l]);return e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:l},e.createElement(ue.cZ,{title:"Mute/Unmute Remote Tracks",Icon:je.Z},e.createElement(ue.z2,{title:"Role",options:[{label:"All Roles",value:""},...n.map(ie=>({label:ie,value:ie}))],selected:d,keyField:"value",labelField:"label",onChange:r}),e.createElement(ue.z2,{title:"Track type",options:sn,selected:a,onChange:c,keyField:"value",labelField:"label"}),e.createElement(ue.z2,{title:"Track source",options:nn,selected:m,onChange:k,keyField:"value",labelField:"label"}),e.createElement(ue.DP,null,e.createElement(p.x,{variant:"md"},"Track status"),e.createElement(Le.E.Root,{value:o,onValueChange:i},e.createElement(f.k,{align:"center",css:{mr:"$8"}},e.createElement(Le.E.Item,{value:!1,id:"trackDisableRadio",css:{mr:"$4"}},e.createElement(Le.E.Indicator,null)),e.createElement($e._,{htmlFor:"trackDisableRadio"},"Mute")),e.createElement(f.k,{align:"center",css:{cursor:"pointer"}},e.createElement(Le.E.Item,{value:!0,id:"trackEnableRadio",css:{mr:"$4"}},e.createElement(Le.E.Indicator,null)),e.createElement($e._,{htmlFor:"trackEnableRadio"},"Request Unmute")))),e.createElement(ue.DP,{justify:"end"},e.createElement(_e.z,{variant:"primary",onClick:X},"Apply"))))};var we=t(9478);const Ve=pt.eC.getOS().name.toLowerCase(),on=Ve==="mac os",rn=Ve==="android"||Ve==="ios",st=()=>{const l=(0,u._U)(E.AI),n=(0,u._U)(E.xf),s=(0,u._U)(E.I3),o=(0,u._U)(E.fo),i=(0,u.cw)(),a=(0,u._U)((0,E.EP)(R._8.hlsStats)),[c,d]=(0,e.useState)(!1),[r,m]=(0,e.useState)(!1),[k,X]=(0,e.useState)(!1),[ie,N]=(0,e.useState)(!1),[Ae,Ne]=(0,e.useState)(!1),[mt,ut]=(0,e.useState)(!1),[Wn,ht]=(0,e.useState)(!1),[Et,vt]=(0,e.useState)(!1),Zn=(0,Ze.Z)(ke.vc.media.md),{isBrowserRecordingOn:Kn}=(0,Ke.v)();return e.createElement(e.Fragment,null,e.createElement(_.L.Root,{open:c,onOpenChange:d},e.createElement(_.L.Trigger,{asChild:!0,"data-testid":"more_settings_btn"},e.createElement(U.Z,null,e.createElement(V.u,{title:"More options"},e.createElement(I.x,null,e.createElement(_t.Z,null))))),e.createElement(_.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"$96","@md":{w:"$64"}}},Zn&&l?.browserRecording?e.createElement(e.Fragment,null,e.createElement(_.L.Item,{onClick:()=>vt(We=>!We)},e.createElement(ft.Z,null),e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},Kn?"Stop":"Start"," Recording")),e.createElement(_.L.ItemSeparator,null)):null,e.createElement(_.L.Item,{onClick:()=>m(We=>!We),"data-testid":"change_name_btn"},e.createElement(gt.Z,null),e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},"Change Name")),e.createElement(zt,{onClick:()=>ht(!0)}),e.createElement(en,null),n.screen&&e.createElement(kt,{setShowOpenUrl:N}),l.mute&&e.createElement(_.L.Item,{onClick:()=>X(!0),"data-testid":"mute_all_btn"},e.createElement(je.Z,null),e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},"Mute All")),e.createElement(_.L.ItemSeparator,null),e.createElement(_.L.Item,{onClick:()=>Ne(!0),"data-testid":"device_settings_btn"},e.createElement(Pt.Z,null),e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},"Settings")),we.T.enableStatsForNerds&&(o==="hls-viewer"?e.createElement(_.L.Item,{onClick:()=>i.setAppData(R._8.hlsStats,!a),"data-testid":"hls_stats"},e.createElement(Ye.X.Root,{css:{margin:"$2"},checked:a,onCheckedChange:()=>i.setAppData(R._8.hlsStats,!a)},e.createElement(Ye.X.Indicator,null,e.createElement(ze.Z,{width:16,height:16}))),e.createElement(f.k,{justify:"between",css:{width:"100%"}},e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},"Show HLS Stats"),rn?null:e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},`${on?"\u2318":"ctrl"} + ]`))):e.createElement(_.L.Item,{onClick:()=>ut(!0),"data-testid":"stats_for_nreds_btn"},e.createElement(At.Z,null),e.createElement(p.x,{variant:"sm",css:{ml:"$4"}},"Stats for Nerds"))))),k&&e.createElement(ln,{onOpenChange:X}),r&&e.createElement(Zt,{onOpenChange:m}),Ae&&e.createElement(Tt.Z,{open:!0,onOpenChange:Ne}),we.T.enableStatsForNerds&&mt&&e.createElement(Mt,{open:mt,onOpenChange:ut}),Wn&&e.createElement(yt.t,{peerId:s,onOpenChange:ht}),Et&&e.createElement(Ot,{open:Et,onOpenChange:vt}),ie&&e.createElement(Yt,{onOpenChange:N}))};var an=t(1182),lt=t(5106);function cn(l,n){let s=l.filter(k=>k.srcObject!==null).length;const o=n.getContext("2d");o.fillStyle="#000000";const i=n.width,a=n.height;if(s===0){o.fillRect(0,0,i,a);return}else if(s===1||s===2){o.drawImage(l[0],0,0,i,a);return}const c=s<=2?1:2,d=Number(Math.ceil(s/c)),r=a/c,m=i/d;mn(c,d,r,m,l,o)}function dn(l){const n=l.getContext("2d");n.fillStyle="#000000";const s=l.width,o=l.height;n.fillRect(0,0,s,o)}function mn(l,n,s,o,i,a){let c=0;for(let d=0;d<l;d++){const r=d*s;for(let m=0;m<n;m++){const k=m*o,X=i[c];!X||X.srcObject===null?a.fillRect(k,r,o,s):a.drawImage(X,k,r,o,s),c++}}}var un=Object.defineProperty,hn=(l,n,s)=>n in l?un(l,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[n]=s,En=(l,n,s)=>(hn(l,typeof n!="symbol"?n+"":n,s),s),Se=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});const ot=4,vn=30,pn=900,_n=600,rt="leavepictureinpicture",Ee={starting:"starting",started:"started",stopping:"stopping",stopped:"stopped"};class fn{constructor(){En(this,"stop",()=>Se(this,null,function*(){var n;this.state!==Ee.stopped&&(this.state=Ee.stopping,(n=this.pipVideo)==null||n.removeEventListener(rt,this.stop),this.timeoutRef&&lt.gr(this.timeoutRef),this.isOn()&&this.exitPIP(),yield this.detachOldAttachNewTracks(this.tracksToShow,[]),this.onStateChange(!1),this.reset(),this.state=Ee.stopped)})),this.reset()}reset(){console.debug("resetting PIP state"),this.canvas=null,this.pipVideo=null,this.timeoutRef=null,this.hmsActions=null,this.videoElements=[],this.tracksToShow=[],this.onStateChange=()=>{},this.state=Ee.stopped}isSupported(){return!!document.pictureInPictureEnabled}isOn(){return!!document.pictureInPictureElement}start(n,s){return Se(this,null,function*(){if(!this.isSupported())throw new Error("pip is not supported on this browser");if(console.debug("starting PIP, current state",this.state),this.state===Ee.started)yield this.stop();else if(this.state===Ee.starting)return;this.state=Ee.starting;try{yield this.init(n,s),this.pipVideo.addEventListener(rt,this.stop),this.renderLoop(),this.isOn()||(yield this.requestPIP()),console.debug("pip started"),this.state=Ee.started,this.onStateChange(!0)}catch(o){console.error("error in request pip",o),this.state=Ee.stopped}})}updatePeersAndTracks(n,s){return Se(this,null,function*(){if(!this.canvas)return;const o=this.pickTracksToShow(n,s),i=this.tracksToShow;this.tracksToShow=this.orderNewTracksToShow(o,i);try{yield this.detachOldAttachNewTracks(i,this.tracksToShow,s)}catch(a){console.error("error in detaching/attaching tracks",a)}})}init(n,s){return Se(this,null,function*(){yield this.initMediaElements(),this.hmsActions=n,this.onStateChange=s})}initMediaElements(){return Se(this,null,function*(){if(!this.canvas){const{canvas:n,pipVideo:s}=this.initializeCanvasAndVideoElement();this.canvas=n,this.pipVideo=s,this.videoElements=this.initializeVideoElements();const o=this.pipVideo.play();dn(this.canvas),yield o}})}initializeCanvasAndVideoElement(){const n=document.createElement("canvas");n.width=pn,n.height=_n;const s=document.createElement("video");return s.muted=!0,s.srcObject=n.captureStream(),{canvas:n,pipVideo:s}}initializeVideoElements(){let n=[];for(let s=0;s<ot;s++){const o=document.createElement("video");o.autoplay=!0,o.playsinline=!0,n.push(o)}return n}renderLoop(){const n=1e3/vn;this.timeoutRef=lt.iK(()=>{this.state===Ee.stopping||this.state===Ee.stopped||(this.state===Ee.started&&cn(this.videoElements,this.canvas),this.renderLoop())},n)}requestPIP(){return Se(this,null,function*(){try{this.isOn()&&this.exitPIP(),yield this.pipVideo.requestPictureInPicture()}catch(n){throw console.error("error in requestpip",n,"state",this.state),n}})}exitPIP(){document.exitPictureInPicture()}pickTracksToShow(n,s){var o;const i=[];for(const a of n){if(i.length===ot)break;a.videoTrack&&((o=s[a.videoTrack])==null?void 0:o.enabled)&&i.push(a.videoTrack)}return i}orderNewTracksToShow(n,s){const o=[],i=[];n.forEach(a=>{const c=s.indexOf(a);c!==-1&&c<n.length?o[c]=a:i.push(a)});for(let a=0;a<n.length;a++)o[a]||(o[a]=i.shift());return o}detachOldAttachNewTracks(n,s,o=null){return Se(this,null,function*(){const i=Math.max(n.length,s.length);for(let a=0;a<i;a++)n[a]!==s[a]&&(n[a]&&((!o||o[n[a]])&&(yield this.hmsActions.detachVideo(n[a],this.videoElements[a])),this.videoElements[a]&&(this.videoElements[a].srcObject=null)),s[a]&&(yield this.hmsActions.attachVideo(s[a],this.videoElements[a])))})}}const Ue=new fn;var gn=Object.defineProperty,Pn=(l,n,s)=>n in l?gn(l,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[n]=s,Ie=(l,n,s)=>(Pn(l,typeof n!="symbol"?n+"":n,s),s),at=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});class An{constructor(){Ie(this,"setup",(n,s)=>{this.actions=n,this.store=s,this.initState(),this.setUpHandlers()}),Ie(this,"initState",()=>{var n,s,o,i;const a=this.store.getState(E.uX),c=this.store.getState(E.um);(s=(n=navigator.mediaSession)==null?void 0:n.setMicrophoneActive)==null||s.call(n,a),(i=(o=navigator.mediaSession)==null?void 0:o.setCameraActive)==null||i.call(o,c),this.store.subscribe(d=>{var r,m;(m=(r=navigator.mediaSession)==null?void 0:r.setMicrophoneActive)==null||m.call(r,d)},E.uX),this.store.subscribe(d=>{var r,m;(m=(r=navigator.mediaSession)==null?void 0:r.setCameraActive)==null||m.call(r,d)},E.um)}),Ie(this,"toggleMic",()=>at(this,null,function*(){console.log("toggle mic clicked in pip");const n=this.store.getState(E.uX);yield this.actions.setLocalAudioEnabled(!n)})),Ie(this,"toggleCam",()=>at(this,null,function*(){console.log("toggle cam clicked in pip");const n=this.store.getState(E.um);yield this.actions.setLocalVideoEnabled(!n)})),Ie(this,"leave",()=>{console.log("leave called from pip"),this.actions.leave()}),Ie(this,"setUpHandlers",()=>{if(navigator.mediaSession)try{navigator.mediaSession.setActionHandler("togglemicrophone",this.toggleMic),navigator.mediaSession.setActionHandler("togglecamera",this.toggleCam),navigator.mediaSession.setActionHandler("hangup",this.leave)}catch(n){console.error("error in setting media session handlers",n)}})}}const yn=new An,Tn=()=>{const l=(0,u._U)(E.fo),[n,s]=(0,e.useState)(Ue.isOn()),o=(0,u.cw)(),i=(0,u.gg)(),a=(0,e.useCallback)(()=>{n?Ue.stop().catch(c=>console.error("error in stopping pip",c)):(Ue.start(o,s).catch(c=>console.error("error in starting pip",c)),yn.setup(o,i))},[o,n,i]);return(0,e.useEffect)(()=>()=>{Ue.stop().catch(c=>console.error("error in stopping pip on unmount",c))},[]),!Ue.isSupported()||l===R.Pj?null:e.createElement(e.Fragment,null,e.createElement(V.u,{title:`${n?"Deactivate":"Activate"} picture in picture view`},e.createElement(U.Z,{active:!n,key:"pip",onClick:()=>a(),"data-testid":"pip_btn"},e.createElement(an.Z,null))),n&&e.createElement(Sn,{setIsPipOn:s}))},Sn=()=>{const l=(0,u._U)(E.zK),n=(0,u._U)(E.LY);return(0,e.useEffect)(()=>{Ue.updatePeersAndTracks(n,l).catch(s=>{console.error("error in updating pip",s)})},[l,n]),null},it=Tn;var Cn=t(4685),Be=t(8160);const ct=({css:l})=>{const n=(0,u._U)(E.xf),s=(0,b.L3)(R.JZ.isAudioOnly),{amIScreenSharing:o,screenShareVideoTrackId:i,toggleScreenShare:a}=(0,M.N)(),c=o&&!!i;return!n.screen||!(0,Me.Lo)()?null:Be.createElement(V.u,{title:`${c?"Stop":"Start"} screen sharing`},Be.createElement(U.Z,{active:!c,css:l,disabled:s,onClick:()=>{a()},"data-testid":"screen_share_btn"},Be.createElement(Cn.Z,null)))},Rn=({onClose:l})=>{const n=(0,u.cw)();return e.createElement(Q.V.Root,{defaultOpen:!0,onOpenChange:s=>!s&&l()},e.createElement(ue.cZ,{title:"AudioOnly Screenshare"},e.createElement("img",{src:"/share-audio.png",alt:"AudioOnly Screenshare instructions"}),e.createElement(ue.DP,{justify:"end"},e.createElement(_e.z,{variant:"primary",onClick:()=>{n.setScreenShareEnabled(!0,{audioOnly:!0,displaySurface:"browser"}).catch(console.error),l()},"data-testid":"audio_screenshare_continue"},"Continue"))))};var On=t(9156),bn=t(370),dt=t(3600),xe=t(8160);const He=()=>{const l=(0,u._U)(E.SI),n=(0,dt.fg)(R.yb.CHAT),s=(0,dt.Jp)(R.yb.CHAT);return xe.createElement(V.u,{key:"chat",title:`${n?"Close":"Open"} chat`},xe.createElement(U.Z,{onClick:s,active:!n,"data-testid":"chat_btn"},l===0?xe.createElement(On.Z,null):xe.createElement(bn.Z,{"data-testid":"chat_unread_btn"})))};var Un=t(550),In=t(1290),Ge=t(8160),De=(l,n,s)=>new Promise((o,i)=>{var a=r=>{try{d(s.next(r))}catch(m){i(m)}},c=r=>{try{d(s.throw(r))}catch(m){i(m)}},d=r=>r.done?o(r.value):Promise.resolve(r.value).then(a,c);d((s=s.apply(l,n)).next())});const Dn=()=>{const l=(0,e.useRef)(null),n=(0,u.cw)(),[s,o]=(0,e.useState)(!1),[i,a]=(0,e.useState)(!1),c=(0,u._U)((0,E.fC)("@100mslive/hms-noise-suppression")),{selectedDeviceIDs:d}=(0,Un.L)(),r=c&&!s,m=(0,e.useCallback)(()=>De(void 0,null,function*(){if(!l.current){const{HMSNoiseSuppressionPlugin:N}=yield Promise.all([t.e(53),t.e(301)]).then(t.bind(t,2053));l.current=new N({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",TERM_PROGRAM:"Apple_Terminal",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",NVM_CD_FLAGS:"-q",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",TERM:"xterm-256color",SHELL:"/bin/zsh",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_config_global_prefix:"/Users/richwhalley/.nvm/versions/node/v19.1.0",TERM_PROGRAM_VERSION:"445",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/richwhalley/Documents/GitHub/100ms-chat",USER:"richwhalley",NVM_DIR:"/Users/richwhalley/.nvm",npm_config_globalconfig:"/Users/richwhalley/.nvm/versions/node/v19.1.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/Documents/GitHub/node_modules/.bin:/Users/richwhalley/Documents/node_modules/.bin:/Users/richwhalley/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/Documents/GitHub/node_modules/.bin:/Users/richwhalley/Documents/node_modules/.bin:/Users/richwhalley/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_json:"/Users/richwhalley/Documents/GitHub/100ms-chat/package.json",__CFBundleIdentifier:"com.apple.Terminal",npm_config_init_module:"/Users/richwhalley/.npm-init.js",npm_config_userconfig:"/Users/richwhalley/.npmrc",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"0.1.4",HOME:"/Users/richwhalley",SHLVL:"3",LOGNAME:"richwhalley",npm_config_cache:"/Users/richwhalley/.npm",npm_lifecycle_script:"webpack --node-env production",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_config_user_agent:"npm/8.19.3 node/v19.1.0 darwin x64 workspaces/false",npm_config_prefix:"/Users/richwhalley/.nvm/versions/node/v19.1.0",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.NS_DURATION_TIME_IN_MS)}}),[]),k=(0,e.useCallback)(()=>De(void 0,null,function*(){l.current&&(yield n.removePluginFromAudioTrack(l.current),l.current=null)}),[n]),X=(0,e.useCallback)(N=>De(void 0,null,function*(){let Ae="adding Noise Suppression plugin failed, see docs";N.message&&(Ae=N.message),ye.y.addToast({title:Ae}),o(!0),yield k(),l.current=null,console.error(N)}),[k]),ie=(0,e.useCallback)(()=>De(void 0,null,function*(){try{o(!1),yield m();const N=n.validateAudioPluginSupport(l.current);if(N.isSupported)yield n.addPluginToAudioTrack(l.current);else{const Ae=N.errMsg;yield X(Ae)}}catch(N){yield X(N)}}),[n,X,m]);return(0,e.useEffect)(()=>{De(void 0,null,function*(){l.current||(yield m());const N=n.validateAudioPluginSupport(l.current);a(N.isSupported),o(!N.isSupported)})},[d.audioInput,n,m]),i&&we.T.showNS()?Ge.createElement(V.u,{title:`Turn ${r?"off":"on"} noise suppression`},Ge.createElement(U.Z,{active:!r,disabled:s,onClick:()=>De(void 0,null,function*(){r?yield k():yield ie()}),"data-testid":"noise_suppression_btn"},Ge.createElement(In.Z,null))):null};var Mn=t(3951);const Ln=e.lazy(()=>Promise.all([t.e(813),t.e(922)]).then(t.bind(t,4922))),wn=()=>{const{amIScreenSharing:l,screenShareVideoTrackId:n,screenShareAudioTrackId:s,toggleScreenShare:o}=(0,M.N)(),i=(0,u._U)(E.xf),a=l&&!n&&!!s,[c,d]=(0,e.useState)(!1);return!i.screen||!(0,Me.Lo)()?null:e.createElement(e.Fragment,null,e.createElement(V.u,{title:`${a?"Stop":"Start"} audio sharing`,key:"shareAudio"},e.createElement(U.Z,{active:!a,onClick:()=>{l?o():d(!0)},"data-testid":"screenshare_audio"},e.createElement(C.Z,null))),c&&e.createElement(Rn,{onClose:()=>d(!1)}))},Nn=()=>e.createElement(Z.$.Root,null,e.createElement(Z.$.Left,null,e.createElement(wn,null),e.createElement(Re,{type:E.Mv.audio}),e.createElement(Re,{type:E.Mv.video}),we.T.enableWhiteboard?e.createElement(D.VK,null):null,e.createElement(Mn.f,null),e.createElement(Dn,null),we.T.enableTranscription&&e.createElement(Ln,null),e.createElement(f.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(Fe.Z,{isMobile:!0}))),e.createElement(Z.$.Center,null,e.createElement(Oe.l,null),e.createElement(ct,null),e.createElement(it,null),e.createElement(st,null),e.createElement(ge.R,null),e.createElement(f.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(He,null))),e.createElement(Z.$.Right,null,e.createElement(Fe.Z,null),e.createElement(He,null)));var xn=t(9209);const Hn=()=>e.createElement(Z.$.Root,{css:{flexWrap:"nowrap","@md":{justifyContent:"center"}}},e.createElement(Z.$.Left,{css:{"@md":{w:"unset",p:"0"}}},e.createElement(Oe.l,null)),e.createElement(Z.$.Center,{css:{"@md":{w:"unset"}}},e.createElement(ct,{css:{"@sm":{display:"none"}}}),e.createElement(I.x,{css:{"@md":{display:"none"}}},e.createElement(it,null)),e.createElement(I.x,{css:{display:"none","@md":{display:"flex",alignItems:"center",mx:"$4"}}},e.createElement(xn.Q$,null)),e.createElement(st,null),e.createElement(I.x,{css:{"@md":{display:"none"}}},e.createElement(ge.R,null)),e.createElement(f.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(He,null))),e.createElement(Z.$.Right,null,e.createElement(Fe.Z,null),e.createElement(He,null))),Fn=()=>(0,Me.ZM)()?e.createElement(Hn,null):e.createElement(Nn,null);var $n=t(610);const Vn=()=>{var l,n;const s=(0,u.cw)(),o=(0,b.tQ)(),i=(0,u._U)(E.lj);return!i?.role||o?null:e.createElement(ue.wq,{title:"Role Change Request",onOpenChange:a=>!a&&s.rejectChangeRole(i),body:`${(l=i?.requestedBy)==null?void 0:l.name} has requested you to change your role to ${(n=i?.role)==null?void 0:n.name}.`,onAction:()=>{s.acceptChangeRole(i)},actionText:"Accept"})};var Bn=t(8760);const Gn=()=>{const l=(0,Bn.H)(),{roomId:n,role:s}=(0,g.UO)(),o=(0,b.tQ)(),i=(0,u._U)(E.Pz),a=(0,P.Z)(i),c=(0,u._U)(E.ln),d=(0,u.cw)();return(0,e.useEffect)(()=>{if(!n){l("/");return}!a&&!(i===E.wk.Connecting||i===E.wk.Reconnecting||c)&&l(s?`/preview/${n||""}/${s}`:`/preview/${n||""}`)},[c,a,i,l,s,n]),(0,e.useEffect)(()=>{o&&d.ignoreMessageTypes(["chat"])},[o,d]),(0,e.useEffect)(()=>()=>{c&&d.leave()},[d,c]),c?e.createElement(f.k,{css:{size:"100%"},direction:"column"},!o&&e.createElement(I.x,{css:{h:"$18","@md":{h:"$17"}},"data-testid":"header"},e.createElement($n.h,null)),e.createElement(I.x,{css:{w:"100%",flex:"1 1 0",minHeight:0},"data-testid":"conferencing"},e.createElement(F,null)),!o&&e.createElement(I.x,{css:{flexShrink:0,minHeight:"$24"},"data-testid":"footer"},e.createElement(Fn,null)),e.createElement(Vn,null)):e.createElement($.Z,null)}},5349:(ve,Y,t)=>{t.d(Y,{m:()=>H,O:()=>B});var e=t(8160),g=t(32),P=t(9290),u=t(6939),E=t(8485),f=t(8721);const I=t.p+"static/media/first_person.0917322d0bba25059a53.png",$=e.memo(()=>e.createElement(u.x,{css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",backgroundImage:`url(${I})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"},"data-testid":"first_person_img"},e.createElement(E.k,{align:"center",direction:"column",css:{position:"absolute",w:"100%",top:"33.33%",left:0,textAlign:"center"}},e.createElement(f.x,{color:"white",variant:"h4",css:{"@md":{fontSize:"$md"}}},"Welcome!"),e.createElement(f.x,{color:"white",variant:"h6",css:{mt:"$4","@md":{fontSize:"$sm"}}},"You\u2019re the first one here."),e.createElement(f.x,{color:"white",variant:"h6",css:{mt:"$2","@md":{fontSize:"$sm"}}},"Sit back and relax till the others join.")))),M=(0,P.zo)("img",{width:"100%",height:"auto",r:"$3"});var q=t(8051);const K=4,b=JSON.parse({NVM_INC:"/Users/richwhalley/.nvm/versions/node/v19.1.0/include/node",TERM_PROGRAM:"Apple_Terminal",NODE:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",NVM_CD_FLAGS:"-q",INIT_CWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",TERM:"xterm-256color",SHELL:"/bin/zsh",TMPDIR:"/var/folders/1n/1t_dfvpj3r14m8rrf_4tdg5m0000gq/T/",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_config_global_prefix:"/Users/richwhalley/.nvm/versions/node/v19.1.0",TERM_PROGRAM_VERSION:"445",TERM_SESSION_ID:"2FF9AA53-AE49-4B54-9A1E-30159D7C3C7D",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/richwhalley/Documents/GitHub/100ms-chat",USER:"richwhalley",NVM_DIR:"/Users/richwhalley/.nvm",npm_config_globalconfig:"/Users/richwhalley/.nvm/versions/node/v19.1.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.aScJiBOdNO/Listeners",__CF_USER_TEXT_ENCODING:"0x1F7:0x0:0x0",npm_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/Documents/GitHub/node_modules/.bin:/Users/richwhalley/Documents/node_modules/.bin:/Users/richwhalley/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin:/Users/richwhalley/Documents/GitHub/node_modules/.bin:/Users/richwhalley/Documents/node_modules/.bin:/Users/richwhalley/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/richwhalley/.nvm/versions/node/v19.1.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:~/.dotnet/tools",_:"/Users/richwhalley/Documents/GitHub/100ms-chat/node_modules/.bin/webpack",npm_package_json:"/Users/richwhalley/Documents/GitHub/100ms-chat/package.json",__CFBundleIdentifier:"com.apple.Terminal",npm_config_init_module:"/Users/richwhalley/.npm-init.js",npm_config_userconfig:"/Users/richwhalley/.npmrc",PWD:"/Users/richwhalley/Documents/GitHub/100ms-chat",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"100ms_edtech_template",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/richwhalley/.nvm/versions/node/v19.1.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"0.1.4",HOME:"/Users/richwhalley",SHLVL:"3",LOGNAME:"richwhalley",npm_config_cache:"/Users/richwhalley/.npm",npm_lifecycle_script:"webpack --node-env production",NVM_BIN:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin",npm_config_user_agent:"npm/8.19.3 node/v19.1.0 darwin x64 workspaces/false",npm_config_prefix:"/Users/richwhalley/.nvm/versions/node/v19.1.0",npm_node_execpath:"/Users/richwhalley/.nvm/versions/node/v19.1.0/bin/node",NODE_ENV:"production",REACT_APP_TILE_SHAPE:"1-1",REACT_APP_THEME:"dark",REACT_APP_COLOR:"#2F80FF",REACT_APP_LOGO:"",REACT_APP_FONT:"Roboto",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/breakthrough.app.100ms.live/",REACT_APP_ENV:"prod",REACT_APP_ENABLE_HLS_QUALITY_LVL:"true",REACT_APP_LOGROCKET_ID:"<Your Logrocket project ID>",REACT_APP_POLICY_CONFIG:"",REACT_APP_DEFAULT_APP_DETAILS:"{}",REACT_APP_ENABLE_STATS_FOR_NERDS:"'false'",REACT_APP_PUSHER_APP_KEY:"",REACT_APP_PUSHER_AUTHENDPOINT:"",REACT_APP_HEADLESS_JOIN:"false",REACT_APP_TITLE:"100ms App"}.REACT_APP_WEBINAR_PROPS||"{}"),R=b?.ROOM_IDS||[],x=b?.IMAGE_FILE||"",ne=b?.LINK_HREF||"https://100ms.live/",H=({peers:G,maxTileCount:re})=>{const W=P.vc.media.md,j=(0,g.Z)(W);return e.createElement(e.Fragment,null,e.createElement(u.x,{css:{flex:"1 1 0",height:"100%",mx:"$8","@md":{flex:"2 1 0"}}},G&&G.length>0?e.createElement(q.Z,{peers:G,maxTileCount:j?K:re}):R.some(D=>window.location.href.includes(D))?e.createElement(u.x,{css:{display:"grid",placeItems:"center",size:"100%",p:"$12"}},e.createElement("a",{href:ne,target:"_blank",rel:"noreferrer"},e.createElement(M,{css:{p:"$4",boxShadow:"$sm"},alt:"Event template",src:x}))):e.createElement($,null)))},B=({peers:G})=>e.createElement(E.k,{direction:"column",css:{flex:"0 0 20%",mx:"$8","@lg":{flex:"0 0 25%"},"@md":{flex:"1 1 0"}}},e.createElement(E.k,{css:{flex:"1 1 0"},align:"end"},G&&G.length>0&&e.createElement(q.Z,{peers:G,maxColCount:2})))},3844:(ve,Y,t)=>{t.d(Y,{O:()=>P});const e="peerName",g=new Map([[[!0,"screen"].toString(),"Your Screen"],[[!0,"regular"].toString(),`You (${e})`],[[!1,"screen"].toString(),`${e}'s Screen`],[[!1,"regular"].toString(),e],[[!0,void 0].toString(),`You (${e})`],[[!1,void 0].toString(),`${e}`]]),P=({peerName:u,isLocal:E,track:f})=>{const I=u!==void 0;if(!I||!f)return I?g.get([E,void 0].toString()).replace(e,u):"";const $=f.volume===0;let M=g.get([E,f.source].toString());return M?M=M.replace(e,u):M=`${u} ${f.source}`,M=`${M}${f.degraded?"(Degraded)":""}`,`${M}${$?" (Muted for you)":""}`}},535:(ve,Y,t)=>{t.d(Y,{s:()=>C,Z:()=>v});var e=t(8160),g=t(32),P=t(9067),u=t(8081),E=t(9290),f=t(8485),I=t(6939),$=t(2843),M=t(8379),q=t(8523),K=t.n(q),b=t(9057),R=t(6532),x=t(7854),ne=t(8721),H=t(5861),B=t(3074),G=t(9990),re=t(6773),W=t(5581);const j=e.memo(({peerId:h})=>{const p=(0,P._U)((0,u.CI)(h)),_=(0,P._U)(u.k0.selectedItem),U=(0,re.L3)(W.JZ.isAudioOnly),J=(0,P.cw)(),se=(0,e.useRef)(null),[z,ee]=(0,$.Z)(!1),le=(0,M.Z)(se,z,{onClose:()=>ee(!1)});return e.createElement(f.k,{direction:"column",justify:"center",css:{w:"100%",h:"100%"},ref:se},_&&e.createElement(f.k,{justify:"between",align:"center",css:{bg:"$menuBg",p:"$2 $2 $2 $6",borderTopLeftRadius:"$1",borderTopRightRadius:"$1"}},e.createElement(ne.x,{css:{color:"$textPrimary"}},_.name),e.createElement(H.h,{css:{color:"$white"},onClick:()=>{J.videoPlaylist.stop()},"data-testid":"videoplaylist_cross_btn"},e.createElement(b.Z,null))),e.createElement(B.n,{trackId:p?.id,attach:!U,css:{"@lg":{objectFit:"contain",h:"auto"},r:"$1",borderTopLeftRadius:0,borderTopRightRadius:0}}),e.createElement(G.Nc,null,K().enabled&&e.createElement(H.h,{onClick:()=>ee(),css:{color:"$white",height:"max-content",alignSelf:"center",cursor:"pointer"}},le?e.createElement(R.Z,null):e.createElement(x.Z,null))))});var D=t(4685),y=t(7688),O=(h,p,_)=>new Promise((U,J)=>{var se=le=>{try{ee(_.next(le))}catch(oe){J(oe)}},z=le=>{try{ee(_.throw(le))}catch(oe){J(oe)}},ee=le=>le.done?U(le.value):Promise.resolve(le.value).then(se,z);ee((_=_.apply(h,p)).next())});const A=()=>{const h=(0,P.cw)();return e.createElement(f.k,{direction:"column",align:"center",justify:"center",css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",color:"$textPrimary",bg:"$surfaceDefault",textAlign:"center"}},e.createElement(D.Z,{width:48,height:48}),e.createElement(ne.x,{variant:"h5",css:{m:"$8 0"}},"You are sharing your screen"),e.createElement(y.z,{variant:"danger",onClick:()=>O(void 0,null,function*(){yield h.setScreenShareEnabled(!1)}),"data-testid":"stop_screen_share_btn"},e.createElement(b.Z,{width:18,height:18}),"\xA0 Stop screen share"))};var S=t(9477),w=t(8051),L=t(8329);const F=()=>{var h;const p=E.vc.media.lg,_=(0,g.Z)(p),U=(0,P._U)(u.BK),J=(0,P._U)(u.I3),se=(0,P._U)(u.fo),z=(0,P._U)(u.pk),ee=(0,P._U)(u.Oq),le=((h=z?.roleName)==null?void 0:h.toLowerCase())===se?.toLowerCase(),oe=J===z?.id,he=_||oe||le,ce=(0,e.useMemo)(()=>{const ae=U.filter(Te=>Te.id!==z?.id);return he&&z&&ae.unshift(z),ae},[U,z,he]);return e.createElement(f.k,{css:{size:"100%"},direction:_?"column":"row"},e.createElement(V,{amIPresenting:oe,peerPresenting:z,peerSharingPlaylist:ee}),e.createElement(f.k,{direction:{"@initial":"column","@lg":"row"},css:{overflow:"hidden",p:"$4 $8",flex:"0 0 20%","@lg":{flex:"1 1 0"}}},e.createElement(C,{showSidebarInBottom:_,peerScreenSharing:z,isPresenterInSmallTiles:he,smallTilePeers:ce,totalPeers:U.length})))},C=({isPresenterInSmallTiles:h,peerScreenSharing:p,smallTilePeers:_,totalPeers:U,showSidebarInBottom:J})=>{const se=(0,e.useCallback)(z=>p&&z.id!==p.id,[p]);return e.createElement(e.Fragment,null,!h&&e.createElement(T,{peerScreenSharing:p}),e.createElement(Z,{showSidebarInBottom:J,smallTilePeers:_,shouldShowScreenFn:se}))},V=({showStats:h,amIPresenting:p,peerPresenting:_,peerSharingPlaylist:U})=>{const J=(0,P._U)((0,u.K6)(_?.id));return U?e.createElement(I.x,{css:{mx:"$8",flex:"3 1 0","@lg":{flex:"2 1 0",display:"flex",alignItems:"center"}}},e.createElement(j,{peerId:U.id})):e.createElement(I.x,{css:{flex:"3 1 0",mx:"$8","@lg":{ml:"$4",maxHeight:"80%"}}},_&&(p&&!["browser","window","application"].includes(J?.displaySurface)?e.createElement(I.x,{css:{objectFit:"contain",h:"100%"}},e.createElement(A,null)):e.createElement(S.Z,{peerId:_?.id})))},Z=({smallTilePeers:h,shouldShowScreenFn:p,showStatsOnTiles:_,showSidebarInBottom:U})=>e.createElement(f.k,{css:{flex:"2 1 0"}},h&&h.length>0&&e.createElement(w.Z,{peers:h,maxColCount:U?void 0:2,maxRowCount:U?1:void 0,includeScreenShareForPeer:p,showStatsOnTiles:_})),T=({peerScreenSharing:h,showStatsOnTiles:p})=>h?e.createElement(I.x,{css:{flex:"1 1 0",minHeight:"25%",py:"$4","@lg":{mr:"$4",minHeight:"unset",py:0},"@sm":{height:"100%",maxHeight:"75%",alignSelf:"center"}}},e.createElement(L.Z,{showStatsOnTiles:p,width:"100%",height:"100%",peerId:h.id})):null,v=F}}]);

//# sourceMappingURL=411.866ab7a4.js.map